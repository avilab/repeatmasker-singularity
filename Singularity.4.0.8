BootStrap: docker
From: quay.io/biocontainers/repeatmasker:4.0.8--pl526_14

%labels
  Maintainer tpall
  RM_Version 4.0.8
  Repbase_Version 20181026

%post
  # Software versions
  export RM_VERSION=${RM_VERSION:-4.0.8}
  export REPBASE_VER=${REPBASE_VER:-20181026}

  # Configure default locale
  export LC_ALL=en_US.UTF-8
  export LANG=en_US.UTF-8

  ## Download and setup RepBase RepeatMasker Edition
  wget -nv --user $GIRUSER --password $GIRPASS --no-check-certificate \
    -O /tmp/RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar.gz \
    https://www.girinst.org/server/RepBase/protected/repeatmaskerlibraries/RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar.gz
  cp /tmp/RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar.gz /usr/local/share/RepeatMasker/ \
    && cd /usr/local/share/RepeatMasker \
    && gunzip RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar.gz \
    && tar xvf RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar \
    && rm RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar \
    && rm /tmp/RepBaseRepeatMaskerEdition-${REPBASE_VER}.tar.gz
  
  ## Run Configure Script
  perl ./configure

  ## Clean up from source install
  cd / \
    && rm -rf /tmp/* 
  